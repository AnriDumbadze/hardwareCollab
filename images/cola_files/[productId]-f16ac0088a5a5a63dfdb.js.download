_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[82],{coDG:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menu/[categoryId]/[productId]",function(){return n("fWtF")}])},fWtF:function(e,t,n){"use strict";n.r(t);var r,i,c,o=n("cpVT"),a=n("dUq6"),s=n("6y4a"),u=n("q1tI"),l=n("/MKj"),d=n("AmVM"),p=n("20a2"),f=n("nbPw"),h=n("nUG0"),m=n("B9iI"),g=n("e+cM"),b=n("wOhW"),j=n("+Tgi"),x=n("GRpk"),y=n("M09o");function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=function(e){return u.createElement("svg",O({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=u.createElement("circle",{cx:9,cy:9,r:8,fill:"#333",stroke:"#333",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),i||(i=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 8.2a.8.8 0 01.8.8v3.2a.8.8 0 01-1.6 0V9a.8.8 0 01.8-.8z",fill:"#fff"})),c||(c=u.createElement("circle",{cx:9,cy:5.8,fill:"#fff",r:.8})))},w=n("YwTM"),I=n("3KIL"),_=n("MUfk"),k=n("MYKV"),C=n.n(k),N=n("vOnD"),P=n("nKUr");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=N.c.div.withConfig({displayName:"productId__Container",componentId:"sc-f1vf9y-0"})([""]),D=N.c.div.withConfig({displayName:"productId__Wrapper",componentId:"sc-f1vf9y-1"})(["position:relative;max-width:1024px;margin:0 auto;padding:0 60px;margin-top:24px;margin-bottom:30px;& > .to-home{position:static;margin-top:24px;}@media screen and (max-width:1024px){padding:0 20px;margin-bottom:16px;}"]),W=(N.c.div.withConfig({displayName:"productId__HeaderWrap",componentId:"sc-f1vf9y-2"})(["display:flex;justify-content:flex-start;align-items:center;"]),N.c.ul.withConfig({displayName:"productId__List",componentId:"sc-f1vf9y-3"})(["list-style-type:disc;& > li{display:list-item;margin-left:26px;}"]),N.c.a.withConfig({displayName:"productId__Link",componentId:"sc-f1vf9y-4"})(["font-size:",";line-height:29px;text-decoration:none;color:#6e6f84;"],(function(e){return e.theme.headings[4]})),N.c.div.withConfig({displayName:"productId__ProductWrap",componentId:"sc-f1vf9y-5"})(["margin-top:26px;display:flex;justify-content:center;@media screen and (max-width:1024px){margin-top:26px;flex-wrap:wrap;}"])),T=N.c.div.withConfig({displayName:"productId__ImageWrap",componentId:"sc-f1vf9y-6"})(["display:flex;justify-content:center;align-items:flex-start;width:50%;max-width:450px;height:360px;@media screen and (max-width:1024px){width:100%;justify-content:center;}@media screen and (max-width:768px){height:255px;}"]),V=N.c.div.withConfig({displayName:"productId__ProductImage",componentId:"sc-f1vf9y-7"})(["max-width:464px;width:100%;height:360px;margin-right:30px;background-size:contain;background-position:center center;background-repeat:no-repeat;cursor:pointer;border-radius:16px;-moz-border-radius:16px;-webkit-border-radius:16px;-khtml-border-radius:16px;@media screen and (max-width:1024px){background-repeat:no-repeat;background-position:center;width:100%;height:255px;margin-right:0px;}"]),B=N.c.div.withConfig({displayName:"productId__ProductMain",componentId:"sc-f1vf9y-8"})(["margin:0px 16px;margin-right:50px;width:50%;max-width:415px;@media screen and (max-width:1024px){margin:0px;margin-top:25px;width:100%;max-width:100%;}"]),z=N.c.h1.withConfig({displayName:"productId__Title",componentId:"sc-f1vf9y-9"})(["font-size:",";font-weight:bold;line-height:28px;color:",";"],(function(e){return e.theme.headings[1]}),(function(e){return e.theme.colors.dark})),J=N.c.div.withConfig({displayName:"productId__InfoWrap",componentId:"sc-f1vf9y-10"})(["margin-top:0px;display:flex;justify-content:flex-start;align-items:center;font-size:",";line-height:1;font-weight:normal;color:",";& > .info-icon{position:relative;top:5px;left:10px;cursor:pointer;}"],(function(e){return e.theme.headings[6]}),(function(e){return e.theme.colors.black})),L=N.c.div.withConfig({displayName:"productId__Description",componentId:"sc-f1vf9y-11"})(["margin:15px 0;font-size:13px;font-weight:normal;line-height:18px;color:",";"],(function(e){return e.theme.colors.gray})),U=N.c.div.withConfig({displayName:"productId__ButtonsWrap",componentId:"sc-f1vf9y-12"})(["display:flex;align-items:center;& > .button:first-child{margin-right:14px;}& > .active{background:black;& > .heard-icon{fill:",";}}& .heard-icon{fill:",";}& > .button:hover{& > .heard-icon{fill:",";}}"],(function(e){return e.theme.colors.white}),(function(e){return e.theme.colors.black}),(function(e){return e.theme.colors.white})),A=N.c.div.withConfig({displayName:"productId__Footer",componentId:"sc-f1vf9y-13"})(["margin-top:16px;display:flex;justify-content:space-between;"]),F=N.c.div.withConfig({displayName:"productId__Price",componentId:"sc-f1vf9y-14"})(["font-size:",";line-height:44px;font-weight:bold;color:",";"],(function(e){return e.theme.headings[1]}),(function(e){return e.theme.colors.black})),G=N.c.div.withConfig({displayName:"productId__IconWrap",componentId:"sc-f1vf9y-15"})(["position:relative;margin-left:5px;cursor:pointer;"]),K=Object(N.c)(g.f).withConfig({displayName:"productId__ButtonComponent",componentId:"sc-f1vf9y-16"})(["display:flex;align-items:center;justify-content:center;position:relative;background-color:",";border-radius:12px;font-size:",";color:",";&.active{background-color:",";color:",";opacity:1;box-shadow:0px 5px 10px rgba(0,0,0,0.15);transition:all 225ms ease-in-out;}&:hover{background-color:",";color:",";opacity:1;transition:all 225ms ease-in-out;}"],(function(e){return e.theme.colors.darkGray}),(function(e){return e.theme.headings[4]}),(function(e){return e.theme.colors.black}),(function(e){return e.theme.colors.main}),(function(e){return e.theme.colors.white}),(function(e){return e.theme.colors.main}),(function(e){return e.theme.colors.white})),R=N.c.div.withConfig({displayName:"productId__ButtonWrapper",componentId:"sc-f1vf9y-17"})(["display:flex;justify-content:center;justify-content:center;align-items:center;"]),q=N.c.div.withConfig({displayName:"productId__Minus",componentId:"sc-f1vf9y-18"})(["width:18px;height:18px;padding:0 3px;"]),H=N.c.div.withConfig({displayName:"productId__Plus",componentId:"sc-f1vf9y-19"})(["width:18px;height:18px;padding:0 3px;"]),X=N.c.div.withConfig({displayName:"productId__Count",componentId:"sc-f1vf9y-20"})(["width:40px;text-align:center;overflow:hidden;"]),Y=N.c.div.withConfig({displayName:"productId__DefaultText",componentId:"sc-f1vf9y-21"})(["position:absolute;top:0;left:0;right:0;bottom:0;text-align:center;font-weight:600;line-height:44px;"]),Q=N.c.div.withConfig({displayName:"productId__PriceWrap",componentId:"sc-f1vf9y-22"})(["display:flex;flex-direction:column;justify-content:space-between;align-items:center;align-content:center;"]),Z=N.c.div.withConfig({displayName:"productId__NoActivePrice",componentId:"sc-f1vf9y-23"})(["width:100%;font-size:14px;font-weight:600;line-height:14px;text-align:left;text-decoration:line-through;white-space:nowrap;color:",";"],(function(e){return e.theme.colors.gray})),$=function(){return Object(P.jsx)(x.a,{width:450,height:360,viewBox:"0 0 450 360",children:Object(P.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"360"})})},ee=function(e){var t="100%";return e.largeScreen&&(t=700),e.desctopScreen&&(t=500),Object(P.jsxs)(x.a,{width:t,height:160,viewBox:"0 0 ".concat(t," ").concat(160),children:[Object(P.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"80%",height:"20"}),Object(P.jsx)("rect",{x:"0",y:"30",rx:"3",ry:"3",width:"80px",height:"16"}),Object(P.jsx)("rect",{x:"0",y:"62",rx:"3",ry:"3",width:"100%",height:"16"}),Object(P.jsx)("rect",{x:"0",y:"94",rx:"3",ry:"3",width:"40%",height:"16"})]})},te=function(e){var t=e.desctopScreen,n="100%";return e.largeScreen&&(n=700),t&&(n=500),Object(P.jsxs)(x.a,{width:n,height:45,viewBox:"0 0 ".concat(n," ").concat(45),children:[Object(P.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"100px",height:"45"}),Object(P.jsx)("rect",{x:"calc(".concat(n," - 125px)"),y:"0",rx:"3",ry:"3",width:"125px",height:"45"})]})},ne=function(){var e,t,n,r=Object(f.a)(),i=r.t,c=r.lang,o=Object(p.useRouter)(),a=Object(l.b)(),s=Object(u.useState)(!1),x=s[0],O=s[1],k=Object(u.useContext)(d.c),N=k[0],S=(k[1],Object(u.useContext)(d.a)[1]),E=Object(u.useContext)(d.e),ne=(E[0],E[1]),re=Object(u.useState)([]),ie=re[0],ce=re[1],oe=Object(u.useRef)([]),ae=Object(l.c)((function(e){return e.menu.products})),se=Object(l.c)((function(e){return e.basket.products})),ue=Object(l.c)((function(e){return e.user.favorite})),le=o.query,de=(le.categoryId,le.productId),pe=ae.find((function(e){return e.seo.path===de})),fe=pe&&(pe.groupModifiers.length>0||pe.modifiers.length>0),he=pe&&se.find((function(e){return e.id===pe.id})),me=function(e,t,n){var r=[];return e.forEach((function(e){t.forEach((function(t){if(e.id===t){var i=n.find((function(e){return e.id===t}))||e;r.find((function(e){return e.id===i.id}))||r.push(i)}}))})),r}(ae,Object(l.c)((function(e){return e.firebase.category?e.firebase.category.additionalProducts:[]})),se),ge=Object(j.e)(),be=Object(j.f)(),je=pe&&pe.tags&&pe.tags.length>0,xe=je?pe.tags[0]:null;je&&(xe=(xe=xe.replace("sales:","")).split(",")),Object(u.useEffect)((function(){var e=[];if(pe&&pe.nutritionValue)for(var t in pe.nutritionValue)"energyAmount"===t&&e.push({name:t,value:pe.nutritionValue[t]}),"carbohydratesAmount"===t&&e.push({name:t,value:pe.nutritionValue[t]}),"fatAmount"===t&&e.push({name:t,value:pe.nutritionValue[t]}),"proteinsAmount"===t&&e.push({name:t,value:pe.nutritionValue[t]});ce(e)}),[pe]);var ye=function(){return pe?pe.images[1]?pe.images[1]:pe.images[0]:null},Oe="url(".concat(ye()?"".concat("https://api.e-admin.com.ua/app/getPhoto.php?url=https://shifusumy.joinposter.com").concat(ye()):C.a,")");return Object(u.useEffect)((function(){pe&&!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(pe,oe.current)&&(console.log("product -.",pe),y.l(pe),oe.current=pe)}),[pe]),Object(P.jsx)(b.a,{title:pe&&((null===(e=pe.name)||void 0===e?void 0:e[c])||pe.name),children:Object(P.jsx)(M,{children:Object(P.jsxs)(D,{children:[Object(P.jsx)(g.g,{className:"to-home",onClick:function(){return o.back()},children:i("common:products.buttonToHome")}),Object(P.jsxs)(W,{children:[Object(P.jsxs)(T,{children:[!pe&&Object(P.jsx)($,{}),pe&&Object(P.jsx)(V,{onClick:function(){return ne({open:!0,imgUrl:Oe})},style:{backgroundImage:Oe}})]}),Object(P.jsxs)(B,{children:[!pe&&Object(P.jsx)(ee,{largeScreen:be,desctopScreen:ge}),pe&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(z,{children:pe&&((null===(t=pe.name)||void 0===t?void 0:t[c])||pe.name)}),pe.nutritionValue&&Object(P.jsx)(J,{children:Object(P.jsxs)(G,{onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)},children:[Object(P.jsx)(v,{className:"info-icon"}),x&&Object(P.jsx)(g.y,{data:ie})]})}),Object(P.jsx)(L,{children:pe&&(null===(n=pe.description)||void 0===n?void 0:n[c])})]}),fe&&Object(P.jsx)(g.w,{modifiers:pe.modifiers,groupModifiers:pe.groupModifiers,prod:pe}),!fe&&Object(P.jsxs)(A,{children:[!pe&&Object(P.jsx)(te,{largeScreen:be,desctopScreen:ge}),pe&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(Q,{children:[pe.discount&&Object(P.jsxs)(Z,{children:[pe.price?Object.values(pe.price)[0]/100:0,"\u20be"]}),Object(P.jsxs)(F,{children:[pe.discount?pe.discount.price/100:Object.values(pe.price)[0]/100,"\u20be"]})]}),Object(P.jsxs)(U,{children:[N.user&&Object(P.jsx)(g.f,{className:"button small white icon ".concat(ue.find((function(e){return e.id===pe.id}))?"active":""),onClick:N.user?function(){return function(e){var t=ue.find((function(t){return t.id===e.id}));a(t?Object(m.c)(e.id):Object(m.a)(e))}(pe)}:function(){return S({open:!0,filter:!1,type:"login"})},children:Object(P.jsx)(w.a,{className:"heard-icon"})}),Object(P.jsx)(K,{className:"small ".concat(he?"active":""),children:he?Object(P.jsxs)(R,{children:[Object(P.jsx)(q,{onClick:function(){he.basketCount,a(Object(h.c)(pe.id))},children:Object(P.jsx)(I.a,{})}),Object(P.jsx)(X,{children:he.basketCount}),Object(P.jsx)(H,{onClick:function(){a(Object(h.a)(pe))},children:Object(P.jsx)(_.a,{})})]}):Object(P.jsx)(Y,{onClick:function(){return function(e){e(Object(h.a)(pe))}(a)},children:i("common:products.addProduct")})})]})]})]})]})]}),me&&me.length>0&&Object(P.jsx)(g.a,{title:i("common:products.addToOrder"),data:me})]})})})},re=Object(u.memo)(ne);t.default=Object(s.a)(re,E(E({},a),{},{isLoader:!0,skipInitialProps:!1,loadLocaleFrom:function(e,t){return n("5bgu")("./".concat(e,"/").concat(t)).then((function(e){return e.default}))}}))},g4pe:function(e,t,n){e.exports=n("mLbm")},wOhW:function(e,t,n){"use strict";var r=n("cpVT"),i=n("rg98"),c=n("dhJC"),o=n("vJKn"),a=n.n(o),s=n("q1tI"),u=n("/MKj"),l=n("20a2"),d=n.n(l),p=function(e,t,n,r){return new(n||(n=Promise))((function(i,c){function o(e){try{s(r.next(e))}catch(t){c(t)}}function a(e){try{s(r.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}s((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,c,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(a){c=[6,a],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}};function h(e){return p(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,d.a.push(d.a.pathname,d.a.asPath,{locale:e})];case 1:return[2,t.sent()]}}))}))}var m=n("g4pe"),g=n.n(m),b=n("xWvD"),j=n("AmVM"),x=n("QJfm"),y=n("nUG0"),O=n("hCiN"),v=n("B9iI"),w=n("+Tgi"),I=n("e+cM"),_=n("bMwp"),k=n("vOnD"),C=n("nKUr"),N=["children","title","noHeader"];function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=k.c.div.withConfig({displayName:"main__Container",componentId:"sc-1kootbx-0"})(["position:relative;"]),M=k.c.div.withConfig({displayName:"main__Main",componentId:"sc-1kootbx-1"})(["min-height:calc(100vh - 292px);height:100%;"]),D=Object(s.memo)((function(e){var t=e.children,n=e.title,r=void 0===n?"Sushi Man - \u0421\u0443\u0448\u0438 \u0441 \u0441\u043e\u0431\u043e\u0439":n,o=e.noHeader,d=Object(c.a)(e,N),p=Object(u.b)(),f=Object(l.useRouter)(),m=Object(w.h)(),_=Object(u.c)((function(e){return e.user.user})),k=Object(u.c)((function(e){return e.basket})),P=Object(s.useContext)(j.a),D=(P[0],P[1],function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getMenu();case 2:n=e.sent,d.isError||(r=Object(w.a)(n,t),p(Object(O.b)(r)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(s.useEffect)((function(){b.a.database().ref("/web/").on("value",(function(e){var t=e.val();if(t){var n=t.adminPermission.defaultLanguage,r=t.settings.city,i=JSON.parse(localStorage.getItem("activeCity"))?JSON.parse(localStorage.getItem("activeCity")):r[0],c=r.find((function(e){return e.id===i.id}));localStorage.setItem("activeCity",JSON.stringify(c));var o=c.deliveryTerminals[0],a=localStorage.getItem("cart");p(Object(x.e)(t)),p(Object(x.c)(c)),p(Object(x.a)(o)),p(Object(y.f)(a?JSON.parse(a):[])),D(c),function(e){var t=localStorage.getItem("language");t&&h(t),t||("uk"===e&&(localStorage.setItem("language","uk"),h("uk")),"ru"===e&&(localStorage.setItem("language","ru"),h("ru")),"en"===e&&(localStorage.setItem("language","en"),h("en")),"ge"===e&&(localStorage.setItem("language","ge"),h("ge")))}(n),localStorage.setItem("deliveryProduct",JSON.stringify(!1))}}))}),[]);var W=function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/checkout"!==f.asPath&&"/done"!==f.asPath&&"/"!==f.asPath||!_.phone){e.next=5;break}return e.next=3,d.getUser({phone:_.phone.replace("+","")});case 3:(t=e.sent)&&Number(t.walletBalances/100)!==Number(_.walletBalances)&&p(Object(v.g)(S(S({},_),{},{walletBalances:(t.walletBalances/100).toFixed(2)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){W()}),[_]),Object(C.jsxs)(E,{children:[Object(C.jsx)(g.a,{children:Object(C.jsx)("title",{children:r})}),!o&&Object(C.jsx)(I.r,{isCard:!0}),m&&!!k.count&&"/cart"!==f.route&&"/checkout"!==f.route&&Object(C.jsx)(I.c,{basket:k}),Object(C.jsx)(I.o,{}),Object(C.jsx)(I.t,{}),Object(C.jsx)(M,{children:t}),Object(C.jsx)(I.n,{})]})}));t.a=Object(_.a)(D)}},[["coDG",0,1,4,2,3,5]]]);